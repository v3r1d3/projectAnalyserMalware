import logging

from utils.custom_logger import log, Colors


def print_imports_calls(file_path: str, imports: list = None, calls: list = None):
    if imports:
        details_text = ''
        for _import in imports:
            details_text += f'\t{Colors.yellow}Line {_import[0]}: '
            details_text += f"{Colors.white}from {_import[2]} " if len(_import) == 3 else ""
            details_text += f"{Colors.white}import " + ", ".join(
                [f'{name}' + (f' as {asname}' if asname else '') for name, asname in _import[1]])
            details_text += '\n'

        log(f'imports detected in {Colors.blue}{file_path}{Colors.red}:\n' + details_text, logging.ERROR)

    if calls:
        details_text = ''
        for _call in calls:
            details_text += (f'\t{Colors.yellow}Line {_call[0]}: '
                             f'{Colors.white}{_call[1] + "." if _call[1] else ""}{_call[2]}({", ".join(_call[3])})\n')

        log(f'calls detected in {Colors.blue}{file_path}{Colors.red}:\n' + details_text, logging.ERROR)
